<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="mobile-web-app-capable" content="yes" />
    <title id="title1">Test</title>
</head>
<body>
<div id="currpostest"></div>
    <script>
        var testout = document.getElementById("currpostest");
        var lat;
        var lon;
        var alt;
        var hdg;
        var datacnt = 0;
        
        getpos();
                
        function getpos()
        {            
            if (navigator.geolocation) 
            {
                navigator.geolocation.watchPosition(showPosition);
            } 
            else 
            {
                testout.innerHTML = "Geolocation is not supported by this browser.";
            }
        }
        
        function showPosition(position) 
        {
            datacnt += 1;
            
            lat = position.coords.latitude;
            lon = position.coords.longitude;
            alt = position.coords.altitude;
            hdg = position.coords.heading;
            
            test();
        }
        
        function test()
        {
            testout.innerHTML = "Cnt: " + datacnt + "<br>";
            testout.innerHTML += "Lat: " + lat + "<br>";
            testout.innerHTML += "Lon: " + lon + "<br>";
            testout.innerHTML += "Alt: " + alt + "<br>";
            testout.innerHTML += "Hdg: " + hdg + "<br>";
            
            var img = new Image();
            img.src = "https://maps.googleapis.com/maps/api/staticmap?center=" + lat + "," + lon + "&zoom=13&size=300x300&sensor=false";

            testout.appendChild(img);
        }
    </script>
</body>
</html>